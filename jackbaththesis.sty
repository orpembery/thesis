% This style option is designed to work with the report document

% style of LaTeX version 2.09.  Use

% \documentstyle[mitthesis]{report}

% Adapted by Philip Milne from Stephen Gildea's mitthesis style file. 

%

% Later hacked by FEB to reflect updated University regulations and

% to ensure compatibility with LaTeX2e

% 

% Updated on 19/01/05 by PJH to reflect updated University regulations.

% 31/07/13. Edited by Alex Watson (ARW):
% * Now works correctly for two-sided printing.
% * We now use the geometry package to set margins. The results are
%   slightly different from the previous version, but the margins
%   still conform to the regulations.
% * Now the word `degrees' is produced instead of `degree' if you
%   are submitting for multiple degrees. I think this was a regression.
% * Fixed the \copyrightpage macro to work also for two-sided printing.
%   Both the title and the copyright text are now placed vertically
%   one-third of the way down their respective pages.
% * Changed the (to my mind) odd vertical spacing of the copyright text,
%   which everyone who submits a thesis seems to do anyway.
% * Compatibility with babel.

% Updated on 9/12/13 by PJH to reflect the new declaration on the restriction of circulation of the thesis.
% * Removed the \norestrictions command since the declarations for restrictions and no restrictions are now the same.
% * Required the entry of the Faculty/School (with \faculty) so that this may be included in the new declaration.
% * Changed the signature line to reflect that this is now the signature of a member of the faculty, not the author.

% Edited (somehow) by Jack Betteridge in 2019

% Lots of old stuff cleared out by Owen Pembery (also in 2019), also hacked to work with the book document class

%% Announce ourselves

\ProvidesPackage{jackbaththesis}


%% We redefine \cleardoublepage to take an optional argument which sets the
%% page style of the empty page which may be generated. This has two
%% effects:
%% 1. We use it to ensure empty pages generated before the start of the
%%    thesis don't receive page numbers.
%% 2. With this definition of \cleardoublepage, empty pages generated by the
%%    book class or the openright option of the report class will not receive
%%    any headers, even if using fancyhdr or similar. To alter this behaviour,
%%    change the default value of the optional argument (`plain' below).
%% Adapted from the fancyhdr manual.

\renewcommand{\cleardoublepage}[1][plain]{%
  \clearpage\if@twoside \ifodd\c@page\else
  \hbox{}%
  \thispagestyle{#1}%
  \newpage
  \if@twocolumn\hbox{}\newpage\fi\fi\fi
}



%% Page layout: the regs ask for a margin of at least 40mm on the
%% binding edge (left hand margin) and at least 15mm on all other
%% margins.  The following does the job

%% Set page layout with the (more flexible) geometry package. This also
%% accommodates two-sided printing.

%% If you want to use the fancyhdr package, include
% \geometry{head=x}
%% in your premable, with x >= 13.6pt.

\RequirePackage{geometry}
\geometry{a4paper, inner=40mm, outer=20mm, top=20mm, bottom=20mm, includefoot, includehead}%, includehead, includefoot}%head=10mm, foot=10mm}


%% The regs allow single or one-and-a-half line spacing.
%% To allow for the latter we use the setspace package which is supposed to
%% work with any dialect of LaTeX---well, it did after messing with
%% it for several hours....
%%
%% If you need single spacing, add \singlespacing to your preamble after
%% including baththesis.
\RequirePackage{setspace}
\onehalfspacing


% If you are getting two degrees, use \and between the names.

\def\degree#1{
  \setbox0\hbox{#1}  %for side effect of setting \@degreeword [?? -ARW.]
  \gdef\@degree{#1}
}

% \and is used inside the \degree argument to separate two degrees

\gdef\@degreeword{degree}
\def\and{\gdef\@degreeword{degrees} \par and \par}

\def\degreemonthyear#1{\gdef\@degreemonthyear{#1}}

% input department name

\def\department#1{\gdef\@department{#1}}

% input faculty/school name
\def\faculty#1{\gdef\@faculty{#1}}

\def\@standardcopyright{Attention is drawn to the fact that copyright of this thesis/portfolio rests with the author and copyright of any previously published materials included may rest with third parties. A copy of this thesis/portfolio has been supplied on condition that anyone who consults it understands that they must not copy it or use material from it except as licenced, permitted by law or with the consent of the author or other copyright owners, as applicable.}

\def\@authorship{I am the author of this thesis, and the work described therein was carried out by
  myself personally, with the exception of \cref{chap:nbpc} where 20\% of the work was carried out by Dr. Euan Spence; who proved \cref{cor:1} (generalising my proof of \cref{cor:1a}), \cref{thm:2}, and \cref{lem:sharp}.}


%% New statement of restrictions requires a space for the date from which the thesis may be made available.

%\def\@restriction{This thesis may be made available for consultation within the University Library and may be photocopied 
%or lent to other libraries for the purposes of consultation with effect from\dotfill\break \hbox{}\dotfill}

% I have no idea what this next part does. I presume it's something to do with the copyright page - ORP

\gdef\@iscopyrightpage{0}
\gdef\@copyrightpage{\vfill}
\gdef\@copyrightpageafter{\vspace*{\stretch{1}}}
\def\copyrightpage{%
  \gdef\@iscopyrightpage{1}%
  \gdef\@copyrightpage{%
    \par\vspace*{\stretch{2}}%% * see below
    \cleardoublepage[empty]%
    \thispagestyle{empty}%
    \vspace*{\stretch{1}}%
  }%
  \gdef\@copyrightpageafter{%
    \vspace*{\stretch{2}}%
  }%
}
%% * This typesets the title about one-third of the way down the page.
%% To revert to the previous behaviour, change the line marked by * to
%% \par\vspace*{\stretch{1}}
%% instead.


\def\signature#1#2{%
  \par\noindent#1\dotfill\null\par
  {%
    \raggedleft \mbox{#2 \hspace{1in}}\par
  }%
}


\def\maketitle{

\begin{titlepage}

\if@twoside
  % The title page and the copyright page (if applicable) should be odd
% pages outside the page numbering system. This does the trick.
% I've hacked at this to make it work when you also insert a declaration of authorship - ORP
  \if\@iscopyrightpage 0
    \setcounter{page}{-3}
  \else
    \setcounter{page}{-5}
  \fi
\else
  \if\@iscopyrightpage 0
    \setcounter{page}{0}
  \else
    \setcounter{page}{-1}
  \fi
\fi

\thispagestyle{empty}

\begin{center}
  \vspace*{3em}
{\HUGE \@title \par}
\vspace{11.5em}
{\Huge \textsc{\@author}}

\vspace{11em}
{\huge \textit{Thesis submitted for the \@degreeword\ of\\\@degree}}

\vspace{2.5em}

{\LARGE \textsc{University of Bath}}

\vspace{3em}

{\huge \textit{\@department}}

\vspace{1.5em}
{\LARGE \MakeUppercase{\@degreemonthyear}}

\vfill

\end{center} 

% If there is no \copyrightpage, then \@copyrightpage just puts \vfill,
% which by the way will be compressed if the thesis title is very long.
% If there is a \copyrightpage, then \@copyrightpage puts us on a
% new odd page.
%\@copyrightpage


%\noindent
%\@restriction

\vfill

%\begin{center} 

%% The invocation of \signature previously included the name of the signatory, i.e the author, as the second parameter.  The signatory is now a member of the faculty and hence their name may not be known in advance.  As such, \signature's second argument is now left blank. - PJH, 2013

%
%\@copyrightpageafter

%\end{center}

% The \kern0pt pushes any depth into the height.  Thanks to Richard Stone.

\par\kern 0pt\null
\end{titlepage}}


\def\makeaftertitle{

\thispagestyle{empty}

\vfill
\begin{center}

\bf COPYRIGHT

\end{center}
\noindent
\@standardcopyright

\newpage

\thispagestyle{empty}

\vfill
\begin{center}

\bf Declaration of authorship

\end{center}
\noindent
\@authorship

\

\signature{Owen Rhys Pembery}{}
}



%% Redefine the abstract environment so it carries a page number and
%% the heading `Summary'.
%%
%% If you use the babel package, you must load it before baththesis.

\@ifpackageloaded{babel}{
  \addto\extrasenglish{
    \def\abstractname{Summary}
  }
  \addto\extrasbritish{
    \def\abstractname{Summary}
  }
}{
  \def\abstractname{Summary}
}

\def\abstract{%
  \cleardoublepage[empty]%
  \thispagestyle{plain}
  \begin{center}%
    \Large\bfseries \abstractname%
  \end{center}%
}

\def\endabstract{%
  \par\vfil\null\newpage
}


% If using the report style, use - instead of . in the figure number.
% [This isn't in the regulations but it has been in baththesis forever.
% Comment it out if you don't like it. - ARW.]

%\@ifundefined{thechapter}{}{\def\thefigure{\thechapter-\arabic{figure}}}















